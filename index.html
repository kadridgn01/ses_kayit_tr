<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Levan - Mesaj</title>
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Dursun - Mesaj">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
:root{
  /* buraya avatar gÃ¶rselini koy */
  --avatar-url: url('assets/photo6.jpg');

  --bg:#efe6df; --bg2:#f7eee6;
  --ink:#1e2630; --muted:#7a8a99;
  --blue1:#36a5ff; --blue2:#0b6dff;        /* baÅŸlÄ±k gradyanÄ± */
  --me1:#3aa8ff;  --me2:#0b77ff;           /* giden balon */
  --sheet:#fff;   --sheet-border:#cfe2ff;  /* foto kartÄ± */
  --gutter:clamp(14px,3.6vw,20px);
  --shadow-1:0 12px 32px rgba(16,79,180,.16);
  --shadow-2:0 3px 12px rgba(0,0,0,.08);
}
*{box-sizing:border-box} html,body{margin:0}
body{
  background:linear-gradient(180deg,#dfefff 0%,var(--bg) 8%,var(--bg2) 100%);
  color:var(--ink);
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  -webkit-font-smoothing:antialiased;
}
.phone{max-width:480px;margin:0 auto}

/* STATUS */
.status{height:32px;padding:6px var(--gutter) 0;color:#fff;
  background:linear-gradient(180deg,#52b8ff 0%,#0b6dff 100%);
  display:flex;align-items:center}
.clock{font-weight:800;text-shadow:0 1px 0 rgba(0,0,0,.2)}
.sb{margin-left:auto;display:flex;gap:10px;opacity:.95}
.sb svg{width:18px;height:18px}

/* APP BAR */
.app{position:sticky;top:0;z-index:10;padding:12px var(--gutter);
  background:linear-gradient(180deg,var(--blue1),var(--blue2));
  color:#fff;box-shadow:0 18px 36px rgba(0,0,0,.18)}
.app-inner{display:flex;align-items:center;gap:12px}
.app .back{width:36px;height:36px;border-radius:50%;display:grid;place-items:center;
  background:linear-gradient(180deg,rgba(255,255,255,.28),rgba(255,255,255,.12))}
.app .back svg{width:18px;height:18px}
.app .avatar{width:36px;height:36px;border-radius:50%;
  background:#fff var(--avatar-url) center/cover no-repeat;
  border:2px solid rgba(255,255,255,.6)}
.title{font-size:20px;font-weight:900;letter-spacing:.2px}
.actions{margin-left:auto;display:flex;gap:12px}
.actions .btn{width:36px;height:36px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(180deg,rgba(255,255,255,.28),rgba(255,255,255,.12))}

/* THREAD */
.thread{padding:14px var(--gutter) 120px;display:flex;flex-direction:column;gap:16px}

/* MESSAGE BUBBLES */
.msg{max-width:88%;padding:14px 16px;border-radius:18px;background:linear-gradient(180deg,#f4fbff,#e6f2ff);box-shadow:var(--shadow-2);position:relative}
.msg .t{position:absolute;right:12px;bottom:-16px;color:#90a0b2;font-size:12px}
.msg.me{align-self:flex-end;background:linear-gradient(180deg,var(--me1),var(--me2));color:#fff;border-bottom-right-radius:10px}
.msg.me .t{color:#cfe6ff}
.msg .tick{margin-left:6px;opacity:.9}

/* STACKED PHOTO CARD */
.photo-card{
  background:var(--sheet);
  border:2px solid var(--sheet-border);
  border-radius:22px;
  padding:10px;
  box-shadow:var(--shadow-1);
  margin-left:calc(-1*var(--gutter));
  margin-right:calc(-1*var(--gutter));
}
/* FOTO â€” kare, tÃ¼m tarayÄ±cÄ±larda gÃ¼venli */
.photo{
  display:block;
  overflow:hidden;
  border-radius:16px;
  aspect-ratio: 1 / 1;                 /* modern tarayÄ±cÄ±lar */
  background:#e6edf5;
}
.photo img{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:center;
  display:block;
}

/* FALLBACK: aspect-ratio yoksa (eski iOS vb.) kareyi ::before ile kilitle */
@supports not (aspect-ratio: 1 / 1) {
  .photo{ position:relative; }
  .photo::before{ content:""; display:block; padding-top:100%; }
  .photo img{ position:absolute; inset:0; }
}

/* HD + saat */
.badge{
  position:absolute;left:8px;bottom:8px;height:18px;min-width:28px;padding:0 6px;
  display:grid;place-items:center;border-radius:999px;font-size:10px;font-weight:800;
  background:#fff;color:#0b6bff;border:1px solid rgba(255,255,255,.9);box-shadow:0 1px 3px rgba(0,0,0,.12)
}
.stamp{position:absolute;right:8px;bottom:8px;color:#fff;font-weight:800;font-size:12px;text-shadow:0 2px 8px rgba(0,0,0,.45)}

/* INPUT BAR (mikrofon yok) */
.inputwrap{position:fixed;left:0;right:0;bottom:0;padding:10px var(--gutter) calc(env(safe-area-inset-bottom) + 10px);background:linear-gradient(180deg,rgba(255,255,255,0) 0%,var(--bg2) 30%,var(--bg2) 100%)}
.input{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:28px;background:linear-gradient(180deg,#fff,#f5f7fb);border:1px solid rgba(0,0,0,.06);box-shadow:0 10px 28px rgba(0,0,0,.12), inset 0 1px 0 rgba(255,255,255,.7)}
.input .ib{width:40px;height:40px;border-radius:14px;display:grid;place-items:center;background:#eef3f8}
.input input{flex:1;border:0;outline:0;background:transparent;font-size:16px;color:#1a2430}

/* LIGHTBOX */
#lightbox{display:none;position:fixed;inset:0;background:rgba(0,0,0,.88);z-index:100;align-items:center;justify-content:center}
#lightbox img{max-width:100vw;max-height:100vh;object-fit:contain}
#lightbox .close{position:fixed;top:14px;right:14px;width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.15);color:#fff;font-weight:900;font-size:20px;border:1px solid rgba(255,255,255,.25)}

/* desktop vitrin */
@media (min-width:640px){
  .phone{margin:22px auto;border-radius:28px;overflow:hidden;box-shadow:0 30px 90px rgba(0,0,0,.18)}
}
/* === CHAT GÃ–RÃœNÃœMÃœ â€” foto kartlarÄ± solda, saÄŸda boÅŸluk === */
.photo-card{
  align-self:flex-start;
  max-width:40%;              /* saÄŸda boÅŸluk â€“ 82â€“90 arasÄ±nda oynat */
  margin-left:0; margin-right:0;
}

  /* solda hizala, saÄŸda boÅŸluk bÄ±rak */
  align-self: flex-start !important;
  max-width: 86% !important;      /* saÄŸda ~%14 boÅŸluk gÃ¶rÃ¼nÃ¼r */
  padding: 10px !important;       /* kart iÃ§i; 8â€“12 arasÄ± oynatabilirsin */
  border-radius: 22px !important;
  border: 2px solid var(--sheet-border) !important;
  box-shadow: var(--shadow-1) !important;
}

/* istersen bu boÅŸluÄŸu arttÄ±r/azalt:
   86% -> 80% yaparsan saÄŸ boÅŸluk daha da bÃ¼yÃ¼r */

/* === AVATAR â€” her yerde kusursuz daire === */
.app .avatar{
  width: 36px !important;
  height: 36px !important;
  border-radius: 50% !important;
  object-fit: cover !important;       /* img olduÄŸu iÃ§in */
  display: block !important;
  border: 2px solid rgba(255,255,255,.6) !important;
  background: none !important;         /* Ã¶nceki backgroundâ€™Ä± iptal */
}

/* (opsiyonel) metin balonlarÄ± da soldan gelsin dersen: */
.msg{ align-self: flex-start; }
.msg.me{ align-self: flex-end; } /* giden mavi yine saÄŸda kalsÄ±n */
/* ==== TOPBAR: daha kompakt + baÅŸlÄ±k tek satÄ±r ==== */
.app{ padding:8px var(--gutter) !important; }
.app-inner{ gap:10px !important; }
.back{ width:34px !important; height:34px !important; }
.app .avatar{
  width:34px !important; height:34px !important;
  flex:0 0 34px !important; border-radius:50% !important;
  object-fit:cover !important; display:block !important;
  border:2px solid rgba(255,255,255,.6) !important;
}
.title{
  font-size:18px !important; font-weight:800 !important;
  white-space:nowrap !important; overflow:hidden !important;
  text-overflow:ellipsis !important; max-width:60vw !important;
}
.actions .btn{ width:32px !important; height:32px !important; border-radius:10px !important; }

/* ==== FOTO: rozetlerin kaymasÄ±nÄ± dÃ¼zelt (ebeveyn hep relative) ==== */
.photo{
  position:relative !important;                /* Ã–NEMLÄ°: rozetler iÃ§in referans */
  display:block !important;
  overflow:hidden !important;
  border-radius:16px !important;
  aspect-ratio:1/1 !important;                 /* modern tarayÄ±cÄ±lar */
  background:#e6edf5 !important;
}
.photo img{
  width:100% !important; height:100% !important;
  object-fit:cover !important; object-position:center !important;
  display:block !important;
}
/* Fallback: aspect-ratio yoksa kare kilidi */
@supports not (aspect-ratio: 1 / 1) {
  .photo::before{ content:""; display:block; padding-top:100%; }
  .photo img{ position:absolute; inset:0; }
}

/* Rozet konumlarÄ± */
.badge{
  left:8px !important; bottom:8px !important;
  height:18px !important; min-width:28px !important; padding:0 6px !important;
  border-radius:999px !important; font-size:10px !important; font-weight:800 !important;
  background:#fff !important; color:#0b6bff !important;
  border:1px solid rgba(255,255,255,.9) !important;
  box-shadow:0 1px 3px rgba(0,0,0,.12) !important;
}
.stamp{
  right:8px !important; bottom:8px !important;
  color:#fff !important; font-weight:800 !important; font-size:12px !important;
  text-shadow:0 2px 8px rgba(0,0,0,.45) !important;
}

/* ==== Foto kartlarÄ± â€œkarÅŸÄ±dan gelmiÅŸâ€ gibi solda, saÄŸda boÅŸluk ==== */
.photo-card{
  align-self:flex-start !important;
  max-width:40% !important;        /* saÄŸda boÅŸluk â€“ 82â€“90 arasÄ± oynat */
  margin-left:0 !important; margin-right:0 !important;
  padding:10px !important; border-radius:22px !important;
  border:2px solid var(--sheet-border) !important; box-shadow:var(--shadow-1) !important;
}

/* Mesaj balonlarÄ± hizasÄ± (gelen solda, giden saÄŸda) */
.msg{ align-self:flex-start !important; }
.msg.me{ align-self:flex-end !important; }
/* ===== TOP BAR FIX: daha ince bar + baÅŸlÄ±k tek satÄ±r, tamamen sÄ±ÄŸsÄ±n ===== */
.app{ padding:6px var(--gutter) 8px !important; }             /* bar yÃ¼ksekliÄŸi kÄ±saldÄ± */
.app-inner{ gap:8px !important; align-items:center !important; }

.back{ width:32px !important; height:32px !important; }       /* sol buton kÃ¼Ã§Ã¼ldÃ¼ */
.app .avatar{
  width:32px !important; height:32px !important;              /* avatar da 32 */
  border-radius:50% !important; object-fit:cover !important;
  border:2px solid rgba(255,255,255,.6) !important;
}

.title{
  flex:1 1 auto !important;            /* alanÄ± baÅŸlÄ±k alsÄ±n */
  min-width:0 !important;
  white-space:nowrap !important;        /* TEK SATIR */
  overflow:hidden !important;
  text-overflow:ellipsis !important;    /* Ã§ok sÄ±kÄ±ÅŸÄ±rsa zarif kesim */
  font-weight:800 !important;
  /* ekran daralÄ±nca yazÄ±yÄ± kÃ¼Ã§Ã¼ltÃ¼p tamamÄ±nÄ± sÄ±ÄŸdÄ±r: */
  font-size:clamp(16px, 4.6vw, 20px) !important;
  letter-spacing:.1px !important;
}

.actions{ gap:8px !important; flex:0 0 auto !important; }
.actions .btn{
  width:30px !important; height:30px !important;              /* saÄŸdaki ikonlar kÃ¼Ã§Ã¼ldÃ¼ */
  border-radius:10px !important;
}

/* Ã§ok dar cihazlarda ekstra sÄ±kÄ±ÅŸtÄ±rma */
@media (max-width: 360px){
  .actions .btn{ width:28px !important; height:28px !important; }
  .title{ font-size:clamp(15px, 4.8vw, 18px) !important; }
}

  /* ==== ÃœST BAR TEMÄ°ZLÄ°K & iOS SAFE AREA ==== */

/* sahte status barâ€™Ä± tamamen gizle (HTMLâ€™den silmediysen) */
.status{ display:none !important; }

/* app bar: Ã¼st paddingâ€™i notchâ€™a gÃ¶re ayarla ve daha kompakt yap */
.app{
  /* Ã¼stte gÃ¼venli alan + kÃ¼Ã§Ã¼k dikey padding */
  padding: calc(env(safe-area-inset-top) + 6px) var(--gutter) 8px !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 10 !important;
}

/* baÅŸlÄ±k satÄ±rÄ± daha sÄ±kÄ± ve tek satÄ±r */
.app-inner{ gap:8px !important; align-items:center !important; }
.back{ width:32px !important; height:32px !important; }

.app .avatar{
  width:32px !important; height:32px !important;
  border-radius:50% !important; object-fit:cover !important;
  border:2px solid rgba(255,255,255,.6) !important; display:block !important;
}

.title{
  flex:1 1 auto !important; min-width:0 !important;
  white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important;
  font-weight:800 !important;
  font-size:clamp(16px,4.6vw,20px) !important;
}

.actions{ gap:8px !important; }
.actions .btn{ width:30px !important; height:30px !important; border-radius:10px !important; }

/* Ã§ok dar cihazlarda daha da sÄ±kÄ±ÅŸtÄ±r */
@media (max-width:360px){
  .actions .btn{ width:28px !important; height:28px !important; }
  .title{ font-size:clamp(15px,4.8vw,18px) !important; }
}
/* === BAR YÃœKSEKLÄ°K DEÄÄ°ÅKENÄ° === */
:root{ --appbar-h: 56px; }  /* bar yÃ¼ksekliÄŸini buradan yÃ¶net; 54â€“60 iyi durur */

/* Ãœstte gÃ¶rÃ¼nen alan (barÄ±n 1.5xâ€™i) */
.hero{
  height: calc(var(--appbar-h) * 1.5);
  /* Ã¼st kÄ±sÄ±m iÃ§in hafif bir arka plan/derinlik verelim */
  background: linear-gradient(180deg, rgba(11,109,255,.08), rgba(11,109,255,0) 70%);
}

/* Bar: sticky + gÃ¼venli alan */
.app{
  position: sticky !important;
  top: env(safe-area-inset-top) !important;  /* notch altÄ±nda yapÄ±ÅŸsÄ±n */
  z-index: 50 !important;

  /* kompakt padding; yÃ¼ksekliÄŸi sabitlemek iÃ§in min-height */
  padding: 0 var(--gutter) !important;
  min-height: var(--appbar-h) !important;

  display: flex !important;
  align-items: center !important;
}

/* iÃ§ dÃ¼zen â€“ baÅŸlÄ±k ve ikonlar tek satÄ±rda kalsÄ±n */
.app-inner{ gap:8px !important; width:100% !important; }
.back{ width:32px !important; height:32px !important; }
.app .avatar{
  width:32px !important; height:32px !important; border-radius:50% !important;
  object-fit:cover !important; border:2px solid rgba(255,255,255,.6) !important;
}
.title{
  flex:1 1 auto !important; min-width:0 !important;
  white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important;
  font-size:clamp(16px,4.6vw,20px) !important; font-weight:800 !important;
}
.actions{ gap:8px !important; }
.actions .btn{ width:30px !important; height:30px !important; border-radius:10px !important; }

/* Ã§ok dar cihazlar iÃ§in ekstra sÄ±kÄ±laÅŸtÄ±rma */
@media (max-width:360px){
  :root{ --appbar-h: 52px; }
  .actions .btn{ width:28px !important; height:28px !important; }
}
/* === ÃœST BANT: her zaman mavi, iÃ§erik gÃ¶rÃ¼nmesin === */
:root{ --appbar-h: 56px; } /* bar yÃ¼ksekliÄŸi; 54â€“60 arasÄ± oynatabilirsin */

.phone{ position:relative; z-index:1; }  /* topcoat altta kalsÄ±n */

/* ekranÄ±n tepesine yapÄ±ÅŸÄ±k mavi zemin */
.topcoat{
  position:fixed;
  top:0; left:0; right:0;
  height: calc(env(safe-area-inset-top) + var(--appbar-h) * 1.5);
  background: linear-gradient(180deg, var(--blue1), var(--blue2));
  z-index:0;            /* app bar ve iÃ§erikten altta */
  pointer-events:none;  /* dokunmalarÄ± engellemesin */
}

/* hero sadece boÅŸluk iÃ§in; rengi topcoat veriyor */
.hero{ height: calc(var(--appbar-h) * 1.5); background: transparent; }

/* bar notch altÄ±nda sabit kalsÄ±n */
.app{
  position: sticky !important;
  top: env(safe-area-inset-top) !important;
  z-index: 2 !important;
  min-height: var(--appbar-h) !important;
  padding: 0 var(--gutter) !important;
  display:flex !important; align-items:center !important;
  background: linear-gradient(180deg, var(--blue1), var(--blue2)) !important;
}

/* iÃ§ dÃ¼zen â€“ tek satÄ±r baÅŸlÄ±k, kÃ¼Ã§Ã¼k ikonlar */
.app-inner{ width:100%; gap:8px !important; }
.back{ width:32px !important; height:32px !important; }
.app .avatar{
  width:32px !important; height:32px !important; border-radius:50% !important;
  object-fit:cover !important; border:2px solid rgba(255,255,255,.6) !important;
}
.title{
  flex:1 1 auto !important; min-width:0 !important;
  white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important;
  font-weight:800 !important;
  font-size:clamp(16px,4.6vw,20px) !important;
}
.actions{ gap:8px !important; }
.actions .btn{ width:30px !important; height:30px !important; border-radius:10px !important; }

@media (max-width:360px){
  :root{ --appbar-h: 52px; }
  .actions .btn{ width:28px !important; height:28px !important; }
}
/* === ÃœST BANT sade: sadece safe-area + bar yÃ¼ksekliÄŸi kadar === */
:root{ --appbar-h: 56px; } /* bar yÃ¼ksekliÄŸi â€“ istersen 54â€“60 arasÄ± oynat */

.topcoat{
  position:fixed; top:0; left:0; right:0;
  height: calc(env(safe-area-inset-top) + var(--appbar-h));
  background: linear-gradient(180deg, var(--blue1), var(--blue2));
  z-index: 0; pointer-events: none;
}

/* hero tamamen kapalÄ± (fazla maviyi kaldÄ±rÄ±r) */
.hero{ display:none !important; height:0 !important; }

/* bar notch altÄ±nda yapÄ±ÅŸÄ±k kalsÄ±n */
.app{
  position: sticky !important;
  top: env(safe-area-inset-top) !important;
  z-index: 2 !important;
  min-height: var(--appbar-h) !important;
  padding: 0 var(--gutter) !important;
  display:flex !important; align-items:center !important;
  background: linear-gradient(180deg, var(--blue1), var(--blue2)) !important;
}

/* baÅŸlÄ±k/ikon Ã¶lÃ§Ã¼leri (tek satÄ±r) */
.app-inner{ width:100%; gap:8px !important; }
.back{ width:32px !important; height:32px !important; }
.app .avatar{ width:32px !important; height:32px !important; border-radius:50% !important; object-fit:cover !important; border:2px solid rgba(255,255,255,.6) !important; }
.title{ flex:1 1 auto !important; min-width:0 !important; white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important; font-size:clamp(16px,4.6vw,20px) !important; font-weight:800 !important; }
.actions{ gap:8px !important; }
.actions .btn{ width:30px !important; height:30px !important; border-radius:10px !important; }
/* ===== Sabit (fixed) baÅŸlÄ±k + gÃ¼venli alan ===== */
:root{ --appbar-h: 56px; } /* bar yÃ¼ksekliÄŸi; 54â€“60 arasÄ± oynatabilirsin */

/* Mavi arkaplan ÅŸeridi â€” bar + status alanÄ±nÄ± kaplar (overscroll'da da gÃ¶rÃ¼nÃ¼r) */
.topcoat{
  position:fixed; top:0; left:0; right:0;
  height: calc(env(safe-area-inset-top) + var(--appbar-h));
  background: linear-gradient(180deg, var(--blue1), var(--blue2));
  z-index: 0; pointer-events: none;
}

/* Bar: her zaman sabit */
.app{
  position: fixed !important;
  top: env(safe-area-inset-top) !important;   /* notch altÄ±na yasla */
  left: 0; right: 0;
  z-index: 2 !important;
  min-height: var(--appbar-h) !important;
  padding: 0 var(--gutter) !important;
  display:flex !important; align-items:center !important;
  background: linear-gradient(180deg, var(--blue1), var(--blue2)) !important;
}

/* Ä°Ã§ dÃ¼zen: tek satÄ±r baÅŸlÄ±k + kÃ¼Ã§Ã¼k ikonlar */
.app-inner{ width:100%; gap:8px !important; }
.back{ width:32px !important; height:32px !important; }
.app .avatar{
  width:32px !important; height:32px !important;
  border-radius:50% !important; object-fit:cover !important;
  border:2px solid rgba(255,255,255,.6) !important;
}
.title{
  flex:1 1 auto !important; min-width:0 !important;
  white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important;
  font-weight:800 !important; font-size:clamp(16px,4.6vw,20px) !important;
}
.actions{ gap:8px !important; }
.actions .btn{ width:30px !important; height:30px !important; border-radius:10px !important; }

/* Ä°Ã§eriÄŸi barÄ±n altÄ±na iten spacer */
.app-spacer{
  height: calc(env(safe-area-inset-top) + var(--appbar-h));
}

/* Ã–nceden eklediysen heroâ€™yu tamamen kapat (fazla mavi olmasÄ±n) */
.hero{ display:none !important; height:0 !important; }

/* Katmanlama: iÃ§erik bar/topcoat Ã¼stÃ¼nde dursun */
.phone{ position:relative; z-index:1; }

/* Ã‡ok dar cihazlar iÃ§in sÄ±kÄ±laÅŸtÄ±rma */
@media (max-width:360px){
  :root{ --appbar-h: 52px; }
  .actions .btn{ width:28px !important; height:28px !important; }
}

  /* === Sesli Mesaj Balonu === */
.voice-msg{
  --h: 56px;
  --p: 0%;                                /* progress yÃ¼zdesi JS ile gÃ¼ncellenir */
  align-self:flex-start;
  display:flex; align-items:center; gap:12px;
  padding:8px 14px; border-radius:28px;
  background:linear-gradient(180deg,#fff,#e6f2ff);
  box-shadow:0 8px 24px rgba(0,0,0,.12);
  border:1px solid rgba(11,109,255,.10);
  position:relative; max-width: min(680px, 100%);
}
.voice-msg .vm-ava{ position:relative; flex:0 0 auto }
.voice-msg .vm-ava img{
  width:40px;height:40px;border-radius:50%;object-fit:cover;
  box-shadow:0 2px 8px rgba(0,0,0,.15)
}
.voice-msg .vm-mic{
  position:absolute; right:-2px; bottom:-2px;
  width:18px;height:18px;border-radius:50%;
  display:grid;place-items:center;
  background:linear-gradient(180deg,#49a7ff,#0b74ff);
  border:1px solid rgba(255,255,255,.7);
  box-shadow:0 3px 8px rgba(11,119,255,.35);
}

.voice-msg .vm-play{
  width:36px;height:36px;border-radius:50%;
  display:grid;place-items:center;border:0;cursor:pointer;
  background:linear-gradient(180deg,#43b3ff,#0b77ff);
  box-shadow:0 8px 18px rgba(11,119,255,.35);
}
.voice-msg .vm-play .icon-pause{ display:none }
.voice-msg.playing .vm-play .icon-play{ display:none }
.voice-msg.playing .vm-play .icon-pause{ display:block }

.voice-msg .vm-track{
  position:relative; flex:1 1 auto; min-width:160px;
  height:28px; display:flex; align-items:center;
}
.voice-msg .vm-wavewrap{ position:relative; width:100%; height:28px; }
.voice-msg .vm-bars{ width:100%; height:100%; display:block }
.voice-msg .vm-prog{
  position:absolute; inset:0; overflow:hidden; width:var(--p);
}
.voice-msg .vm-dot{
  position:absolute; top:50%; left:var(--p);
  transform:translate(-50%,-50%); width:12px;height:12px;border-radius:50%;
  background:#2a94ff; box-shadow:0 0 0 4px rgba(42,148,255,.15);
}

.voice-msg .vm-time{
  margin-left:auto; color:#7e8fa4; font-weight:700; font-size:14px;
  padding-left:8px;
}

/* KÃ¼Ã§Ã¼k ekranlarda daha kompakt */
@media (max-width:360px){
  .voice-msg{ gap:10px }
  .voice-msg .vm-time{ font-size:12px }
}
/* Foto butonu link davranÄ±ÅŸÄ± olmasÄ±n */
.photo{
  border:0; padding:0; margin:0;
  background:none; cursor:pointer; width:100%;
  display:block; text-align:inherit; appearance:none;
}
/* iOS'ta uzun basÄ±nca â€œKaydetâ€ menÃ¼sÃ¼nÃ¼ engelle */
.photo img{
  -webkit-touch-callout: none;
  -webkit-user-select: none; user-select: none;
  -webkit-user-drag: none;
  pointer-events: none; /* tÄ±klama butonda kalsÄ±n */
}
/* === SABÄ°T APP BAR & BOÅLUK === */
:root{ --appbar-h: 56px; }                 /* 54â€“60 arasÄ± oynatÄ±labilir */
.status{ display:none !important; }        /* sahte status bar kullanmÄ±yoruz */

.topcoat{
  position:fixed; top:0; left:0; right:0;
  height: calc(env(safe-area-inset-top) + var(--appbar-h));
  background: linear-gradient(180deg, var(--blue1), var(--blue2));
  z-index: 0; pointer-events: none;
}

.app{
  position: fixed !important;
  top: env(safe-area-inset-top) !important;
  left: 0; right: 0;
  height: var(--appbar-h) !important;
  display:flex !important; align-items:center !important;
  padding: 0 var(--gutter) !important;
  background: linear-gradient(180deg, var(--blue1), var(--blue2)) !important;
  z-index: 2 !important;
}

.app-spacer{
  height: calc(env(safe-area-inset-top) + var(--appbar-h)) !important;
}

/* baÅŸlÄ±k/ikonlar tek satÄ±r */
.app-inner{ width:100%; gap:8px !important; }
.back{ width:32px !important; height:32px !important; }
.app .avatar{
  width:32px !important; height:32px !important;
  border-radius:50% !important; object-fit:cover !important;
  border:2px solid rgba(255,255,255,.6) !important;
}
.title{
  flex:1 1 auto !important; min-width:0 !important;
  white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important;
  font-size:clamp(16px,4.6vw,20px) !important; font-weight:800 !important;
}
.actions{ gap:8px !important; }
.actions .btn{ width:30px !important; height:30px !important; border-radius:10px !important; }

@media (max-width:360px){
  :root{ --appbar-h: 52px; }
  .actions .btn{ width:28px !important; height:28px !important; }
}

/* Ã‡AKIÅMAYI Ã–NLEME: varsa eski hero/topbar varyantlarÄ±nÄ± kapat */
.hero{ display:none !important; height:0 !important; }
/* Eski 'sticky' app kurallarÄ±nÄ± etkisiz bÄ±rakmak iÃ§in: */
.app{ position: fixed !important; }

  /* === YENÄ° GÃœÃ‡LÃœ DÃœZELTME BLOÄU === */
body {
  /* 1. Arka planÄ± dÃ¼zelt (mavi degradeyi iptal et) */
  background: var(--bg2) !important;
}

.thread {
  /* 2. Kart ile mesaj balonu arasÄ±nÄ± aÃ§ */
  gap: 20px !important;
}

.inputwrap {
  /* 3. Alt barÄ± 'safe area' ile dÃ¼zelt */
  padding: 10px var(--gutter) calc(env(safe-area-inset-bottom, 20px) + 10px) !important;
}

/* 4. Hamsinin etrafÄ±ndaki beyaz Ã§erÃ§eveyi kaldÄ±r */
.photo-card {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
}
</style>
</head>
<body>
<div class="phone">
<div class="app">
Â  <div class="app-inner">
Â  Â  <button class="back" aria-label="Geri">
Â  Â  Â  <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
Â  Â  </button>
    <img class="avatar" src="https://placehold.co/100x100/E2E8F0/4A5568?text=G" alt="Profil">
Â  Â  <div class="title">Levan</div>
Â  Â  <div class="actions">
      <div class="btn" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="6" width="12" height="12" rx="3" stroke="white" stroke-width="2"/><path d="M15 10l6-3v10l-6-3v-4z" fill="white"/></svg></div>
      <div class="btn" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none"><path d="M6 2l4 3-2 3a16 16 0 007 7l3-2 3 4-2 2c-2 2-11-3-14-6S4 4 6 2z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
Â  Â  </div>
Â  </div>
</div>
<div class="app-spacer" style="height: 60px;"></div>

<main class="thread">
    
    <div class="msg">
        tamam patron
        <span class="t">15:05</span>
    </div>
    <div class="msg">
        AnlaÅŸÄ±ldÄ±
        <span class="t">15:07</span>
    </div>
    <div class="msg">
        Buralardalar takipteyiz
        <span class="t">15:08</span>
    </div>
    <div class="msg me">
        ok
        <span class="t">15:06 <span class="tick">âœ“âœ“</span></span>
    </div>

    <a href="#" onclick="openLink(event, 'loading.html')" class="link-preview msg">
        <div class="link-preview-image">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5c-1.47-1.47-3.32-2.33-5.38-2.33-4.04 0-7.39 3.35-7.39 7.39 0 2.06.86 3.91 2.33 5.38.3.3.63.57.98.82A9.95 9.95 0 0 0 12 20.25a9.95 9.95 0 0 0 6.08-2.18c.35-.25.68-.52.98-.82 1.47-1.47 2.33-3.32 2.33-5.38 0-4.04-3.35-7.39-7.39-7.39-2.06 0-3.91.86-5.38 2.33Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 12.75a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
            </svg>
        </div>
        <div class="link-preview-content">
            <div class="link-preview-title">SES_KAYIT.zip</div>
            <div class="link-preview-desc">GÃ¼venli Sunucu (4 Dosya)</div>
        </div>
        <span class="t">15:10</span>
    </a>
</main>

<div class="inputwrap">
Â  <div class="input">
Â  Â  Â  <div class="ib">ğŸ˜Š</div>
Â  Â  Â  <input placeholder="Message" aria-label="Mesaj yazÄ±n" />
Â  Â  Â  <div class="ib">ğŸ“</div>
Â  Â  Â  <div class="ib">ğŸ“·</div>
Â  Â  </div>
Â  </div>
</div>

<script>
    // --- YENÄ° FONKSÄ°YON: PWA Ä°Ã‡Ä°NDE LÄ°NK AÃ‡MA ---
    function openLink(event, url) {
        // TarayÄ±cÄ±nÄ±n normal linki takip etmesini engelle
        event.preventDefault();
        
        // Linki PWA'nÄ±n kendi penceresinde aÃ§
        window.location.href = url;
    }

    // --- Service Worker KaydÄ± ---
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js')
                .then(registration => {
                    console.log('ServiceWorker baÅŸarÄ±yla kaydedildi: ', registration.scope);
                    // Yeni bir sÃ¼rÃ¼m bulunduÄŸunda sayfayÄ± yenilemeyi tetikle
                    registration.onupdatefound = () => {
                        const installingWorker = registration.installing;
                        if (installingWorker) {
                            installingWorker.onstatechange = () => {
                                if (installingWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // Yeni SÃ¼rÃ¼m yÃ¼klendi! Otomatik yenile.
                                    window.location.reload();
                                }
                            };
                        }
                    };
                })
                .catch(err => {
                    console.log('ServiceWorker kaydÄ± baÅŸarÄ±sÄ±z: ', err);
                });
        });
    }
</script>
</body>
</html>
